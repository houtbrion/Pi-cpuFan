# Pi-cpuFan
Raspberry Piを自宅で24時間運転することを考慮すると，エアコン無しでも
熱で壊れないことが重要．
ヒートシンクも存在するが，やはり心配なのでファンを入れることにした．
ただし，24時間ファンが回るとうるさいので，システムの温度が上昇したときだけ
まわるようにしたかった．

そのため，本リポジトリの内容は，Raspberry Pi用のCPU温度に応じて冷却ファンを制御するためのハードとプログラム．
プログラムはgo言語版とshellスクリプト版の2種類を添付しています．
perl版はファン制御用のピン番号を変更する場合，ファンを回すCPU温度を
変更する場合はソースを修正する必要がありますが，go版はconfigファイルを修正するだけで
対応することができます．

## 1. 動作環境
- OS :  Raspberry Pi OS (旧Raspbian)

## 2. ソフトウェア
インストールに必要なツールの情報やインストールの手順はgo言語版プログラムは
goディレクトリ以下のREADME.md，perl版はperlディレクトリ内のREADME.mdに
記載してあります．両方見て，どちらのバージョンを利用するか判断してください．

## 3. その他の添付ファイル
- hardwareディレクトリ : [CADソフト(Fritzing)][fritzing]で作成した回路図やケースの自作例
- toolsディレクトリ : 動作確認，デバッグ用のshellスクリプト


## 4. ハードウェア構成
![配線イメージ][breadboard]では，GPIO16番にファンを制御する回路をつけることが前提になっていますが，
特に特定のGPIOピンでなければならないわけではありません．

制御用のピンを直接ファンにつなげることもできますが，Raspberry PiのGPIOのピンは電圧も3Vで電流も制限されるため，
上記の回路図とブレッドボードでの配線図はRaspberry PiのGPIOピンを制御回路につなぎ，その制御回路で
ファンを制御しています．

制御回路はトランジスタでできており，制御用のピンの電圧がHighになるとトランジスタファンに電流が流れます．
ファンは5Vの端子につながっているため，GPIOの3Vのピンに比べて多くの電力がファンに供給できます．

また，ファンと並列につながっているダイオードは制御時に電流が逆流しないようにするために入れています．



[fritzing]: <https://fritzing.org/> "fritzing"
[breadboard]: breadboard.jpg "ブレッドボード図面"
[Pi-CoolingFan]: <https://github.com/houtbrion/Pi-CoolingFan> "Pi-CoolingFan repository"
[golang]: https://go.dev/ "go公式サイト"
